<request>
    <role>
        Вы - опытный Full-Stack разработчик, специализирующийся создании скриптов с использованием bash для linux платформ.
        Ваша экспертиза включает: Bash, Docker, Docker Compose, Python, тестирование и отладку.
    </role>
    <project>
        <name>VLESS+Reality VPN</name>
        <architecture>
            <program_language>Bash, Python</program_language>
            <infrastructure>Docker Compose</infrastructure>
        </architecture>
    </project>
    <context>
[2025-09-24 11:43:55] [INFO] Ubuntu 24.04 detected - compatible
[2025-09-24 11:43:55] [INFO] Architecture amd64 detected - compatible
[2025-09-24 11:43:55] [INFO] Updating package repositories...
[2025-09-24 11:43:55] [INFO] Performing safe APT update
[2025-09-24 11:43:57] [WARN] APT update failed with exit code: 100
[2025-09-24 11:43:57] [WARN] Detected time-related APT errors
[2025-09-24 11:43:57] [INFO] Synchronizing system time
[2025-09-24 11:43:57] [INFO] Current system time: Wed Sep 24 11:43:57 CEST 2025
[2025-09-24 11:43:57] [INFO] Current system time (UTC): Wed Sep 24 09:43:57 UTC 2025
Failed to restart systemd-timesyncd.service: Unit systemd-timesyncd.service not found.
[2025-09-24 11:43:57] [ERROR] Command failed with exit code 5: systemctl restart systemd-timesyncd
200 OK
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^? 193.109.69.144                0   7     0     -     +0ns[   +0ns] +/-    0ns
200 OK
[2025-09-24 11:44:13] [INFO] Time synchronized using chrony with large offset correction
[2025-09-24 11:44:13] [INFO] Time synchronized, retrying APT update
[2025-09-24 11:44:15] [WARN] APT update failed with exit code: 100
[2025-09-24 11:44:15] [WARN] Detected time-related APT errors
[2025-09-24 11:44:15] [INFO] Synchronizing system time
[2025-09-24 11:44:15] [INFO] Current system time: Wed Sep 24 11:44:15 CEST 2025
[2025-09-24 11:44:15] [INFO] Current system time (UTC): Wed Sep 24 09:44:15 UTC 2025
Failed to restart systemd-timesyncd.service: Unit systemd-timesyncd.service not found.
[2025-09-24 11:44:15] [ERROR] Command failed with exit code 5: systemctl restart systemd-timesyncd
200 OK
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^? 193.109.69.144                0   7     0     -     +0ns[   +0ns] +/-    0ns
200 OK
[2025-09-24 11:44:30] [INFO] Time synchronized using chrony with large offset correction
[2025-09-24 11:44:30] [INFO] Time synchronized, retrying APT update
[2025-09-24 11:44:30] [ERROR] APT update failed after 2 attempts
[2025-09-24 11:44:30] [ERROR] Last error output: E: Release file for http://us.archive.ubuntu.com/ubuntu/dists/noble-updates/InRelease is not valid yet (invalid for another 7min 57s). Updates for this repository will not be applied.
E: Release file for http://us.archive.ubuntu.com/ubuntu/dists/noble-proposed/InRelease is not valid yet (invalid for another 9min 46s). Updates for this repository will not be applied.
[2025-09-24 11:44:30] [ERROR] Failed to update package repositories
[2025-09-24 11:44:30] [FATAL] Failed to update package repositories
[2025-09-24 11:44:30] [ERROR] System update failed
[2025-09-24 11:44:30] [FATAL] Phase 1 installation failed
    </context>
    <requirements>
        <point number="1">Проанализируй ошибку</point>
        <point number="2">Определи причину</point>
        <point number="3">Рассмоотреть несколько вариантов решения проблемы</point>
        <point number="3">Определить наиболее лучший вариант на основании оценки вариантов</point>
        <point number="3">ИСправь проблему с учетом лучшего варианта решения</point>
    </requirements>
    <tasks>
        <task number="1">
            <step number="1">
                <action>Изучить контекст(context), требования(requirements), память CLAUDE.md</action>
            </step>
            <step number="2">
                <thinking>
                    <action>Проанализировать контекст (context) </action>
                    <action>Обдумать требования (requirements) шаг за шагом с учетом CLAUDE.md</action>
                </thinking>
            </step>
            <step number="3">
                <context7>
                    <action>Запросить актуальную документацию по стэку технологий</action>
                </context7>
            </step>
            <step number="3">
                <action>Сохранить результат анализа в формате xml в каталоге /requests с названием analyses.xml</action>
                <requests_directory path="requests/">
                    <file path="analyses.xml"/>
                </requests_directory>
            </step>
            <step number="4">
                <action>Приступить к задаче task 2</action>
            </step>
        </task>
        <task number="2">
            <step number="1">
                <requests_directory path="requests/">
                    <file path="analyses.xml"/>
                </requests_directory>
                <action>Сформировать план задач c помощью субагента на основании /requests/analyses.xml</action>
            </step>
            <step number="2">
                <action>Сохранить план в формате xml в каталоге /requests с названием plan.xml</action>
                <requests_directory path="requests/">
                    <file path="plan.xml"/>
                </requests_directory>
            </step>
            <step number="3">
                <action>Приступить к задаче task 3</action>
            </step>
        </task>
        <task number="3">
            <step number="1">
                <requests_directory path="requests/">
                    <file path="plan.xml"/>
                </requests_directory>
                <action>Выполнить план задач /requests/plan.xml шаг за шагом с помощью субагентов</action>
            </step>
            <step number="2">
                <action>Проверить, что план выполнен полностью</action>
            </step>
            <step number="3">
                <action>ВЫполнить пропущенные задачи</action>
            </step>
            <step number="3">
                <action>Созранить результаты плана в /requests/result.md</action>
                <requests_directory path="requests/">
                    <file path="result.md"/>
                </requests_directory>
            </step>
            <step number="4">
                <action>Приступить к задаче task 4</action>
            </step>
        </task>
        <task number="4">
            <step number="1">
                <test_directory path="tests/"/>
                <action>Реализовать тесты на новый или измененный функционал. Сохранить в каталоге /tests</action>
            </step>
            <step number="2">
                <action>ВЫполнтиь тестирование</action>
            </step>
            <step number="3">
                <action>Приступить к задаче task 5</action>
            </step>
        </task>
        <task number="5">
            <step number="1">
                <documentation_directory path="docs/"/>
                <action>Обновить документацию в /docs и README.md</action>
            </step>
            <step number="2">
                <root_directory path="/">
                    <file path="CLAUDE.md<"/>
                </root_directory>
                <action>Обновить память проекта CLAUDE.md</action>
                <best_practice>
                    <tip number="1">Be specific: “Use 2-space indentation” is better than “Format code properly”.</tip>
                    <tip number="2">Use structure to organize: Format each individual memory as a bullet point and group related memories under descriptive markdown headings.</tip>
                    <tip number="3">Review periodically: Update memories as your project evolves to ensure Claude is always using the most up to date information and context.</tip>
                </best_practice>
                <requirements>
                    <point number="1">Размер CLAUDE.md не должен превышать 40000 токенов</point>
                    <point number="2">Хранить только актуальную информацию по проекту</point>
                </requirements>
            </step>
            <step number="3">
                <action>Сделать коммит и пуш</action>
            </step>
        </task>
        <task number="6">
            <step number="1">
                <action>Сделать коммит и пуш</action>
            </step>
        </task>
    </tasks>
</request>