<request>
    <role>
        Вы - опытный Full-Stack разработчик, специализирующийся создании скриптов с использованием bash для linux платформ.
        Ваша экспертиза включает: Bash, Docker, Docker Compose, Python, Telegram инттеграция, тестирование и отладку.
    </role>
    <project>
        <name>VLESS+REality VPN</name>
        <architecture>
            <program_language>Bash, Python</program_language>
            <infrastructure>Docker Compose</infrastructure>
        </architecture>
    </project>
    <context>
        Скрпит для устанвоки и управления сервером VPN по протоколу VLESS+REality.
        Функции:
        1. Установка сервиса в докер с помощью docker compose. Обновление всех пакетов ооперационной системы
        2. Настройка конфиграций в каталоге /opt/vless c с храением всех конфиграуий
        3. Управление доступом через бота телеграмм админа: создание новых пользователей, удаление пользвоателей
        4. ПЕреустанвока сервера
        5. Удаление сервера
        6. Настройка файрволла UFW
        Документация по проктоклу https://xtls.github.io/en/development/protocols/vless.html
        Задача сервиса обеспечить доступ по ВПН черрез домашние сети вайфай или мобильные сетти без запрета трафика. 
        Безопасность трафика так же важна
    </context>
    <requirements>
        <point number="1">Реализовать набор скрпитов</point>
        <point number="2">Предусмотретть модульность</point>
        <point number="3">Реализлизовать  итеграцию с телеграмм</point>
        <point number="3">Протестировать функционал</point>
    </requirements>
    <tasks>
        <task number="1">
            <step number="1">
                <action>Изучить контекст(context), требования(requirements), память CLAUDE.md</action>
            </step>
            <step number="2">
                <thinking>
                    <action>Проанализировать контекст (context) </action>
                    <action>Обдумать требования (requirements) шаг за шагом с учетом CLAUDE.md</action>
                </thinking>
            </step>
            <step number="3">
                <context7>
                    <action>Запросить актуальную документацию по стэку технологий</action>
                </context7>
            </step>
            <step number="3">
                <action>Сохранить результат анализа в формате xml в каталоге /requests с названием analyses.xml</action>
                <output_file>/requests/analyses.xml</output_file>
            </step>
            <step number="4">
                <action>Приступить к задаче task 2</action>
            </step>
        </task>
        <task number="2">
            <step number="1">
                <input_file>/requests/analyses.xml</input_file>
                <action>Сформировать план задач c помощью субагента на основании /requests/analyses.xml</action>
            </step>
            <step number="2">
                <action>Сохранить план в формате xml в каталоге /requests с названием plan.xml</action>
                <output_file>/requests/plan.xml</output_file>
            </step>
            <step number="3">
                <action>Приступить к задаче task 3</action>
            </step>
        </task>
        <task number="3">
            <step number="1">
                <input_file>/requests/plan.xml</input_file>
                <action>Выполнить план задач /requests/plan.xml шаг за шагом с помощью субагентов</action>
            </step>
            <step number="2">
                <action>Проверить, что план выполнен полностью</action>
            </step>
            <step number="3">
                <action>ВЫполнить пропущенные задачи</action>
            </step>
            <step number="3">
                <action>Созранить результаты плана в /requests/result.md</action>
                <output_file>/requests/result.md</output_file>
            </step>
            <step number="4">
                <action>Приступить к задаче task 4</action>
            </step>
        </task>
        <task number="4">
            <step number="1">
                <test_directory>/tests</test_directory>
                <action>Реализовать тесты на новый или измененный функционал. Сохранить в каталоге /tests</action>
            </step>
            <step number="2">
                <action>ВЫполнтиь тестирование</action>
            </step>
            <step number="3">
                <action>Приступить к задаче task 5</action>
            </step>
        </task>
        <task number="5">
            <step number="1">
                <documentation_directory>/docs</documentation_directory>
                <action>Обновить документацию в /docs и README.md</action>
            </step>
            <step number="2">
                <input_file>CLAUDE.md</input_file>
                <action>Обновить память проекта CLAUDE.md</action>
                <best_practice>
                    <tip number="1">Be specific: “Use 2-space indentation” is better than “Format code properly”.</tip>
                    <tip number="2">Use structure to organize: Format each individual memory as a bullet point and group related memories under descriptive markdown headings.</tip>
                    <tip number="3">Review periodically: Update memories as your project evolves to ensure Claude is always using the most up to date information and context.</tip>
                </best_practice>
                <requirements>
                    <point number="1">Размер CLAUDE.md не должен превышать 40000 токенов</point>
                    <point number="2">Хранить только актуальную информацию по проекту</point>
                </requirements>
            </step>
            <step number="3">
                <action>Сделать коммит и пуш</action>
            </step>
        </task>
        <task number="6">
            <step number="1">
                <action>Сделать коммит и пуш</action>
            </step>
        </task>
    </tasks>
</request>